<html>
<head>
    <h1>
        NYU Tandon Airline Database System
    </h1>
</head>
<body>
    Welcome, {{airlinestaff['first_name']}} </br></br>

    <!-- Some of these could be displayed on the user's page too... -->

    <a href="/viewflightsStaff">View flights</a>
    <a href="/addFlight">New flight</a>
    <a href="/flightStatus">Update flight status</a>
    <a href="/addPlane">New plane</a>
    <a href="/addAirport">New airport</a>
    <a href="/flightRatings">View flight ratings</a>
    <a href="/viewAgents">View booking agents</a>
    <a href="/frequentCustomers">View frequent customers</a>
    <a href="/viewReports">View reports</a>
    <a href="/compareRevenue">Revenue</a></br>

    <style type="text/css">
        table, th, td {
            border: 1px solid black;
            padding-left: 2px;
            padding-right: 2px;
        }
    </style>

    <p>Upcoming flights:</p>

    <table>
        <th>Airline</th>
        <th>Flight No.</th>
        <th>Departure Date</th>
        <th>Departure Time</th>
        <th>Arrival Date</th>
        <th>Arrival Time</th>
        <th>Status</th>
        <th>Base Price</th>
        <th>Departure Airport</th>
        <th>Arrival Airport</th>
        <th>Airplane</th>
        <th>Passenger List</th>

        {% for line in flights %}
        <tr>
            <td>{{line['airline_name']}}</td>
            <td>{{line['flight_num']}}</td>
            <td>{{line['depart_date']}}</td>
            <td>{{line['depart_time']}}</td>
            <td>{{line['arrive_date']}}</td>
            <td>{{line['arrive_time']}}</td>
            <td>{{line['flight_status']}}</td>
            <td>${{line['base_price']}}</td>
            <td>{{line['depart_airport']}}</td>
            <td>{{line['arrive_airport']}}</td>
            <td>{{line['airplane_ID']}}</td>
            <td> 
                <a href = {{ url_for('passengerList' ,airlinename=line['airline_name'], flightnum=line['flight_num'], depdate=line['depart_date'], deptime=line['depart_time'] ) }}> Detail</a>
            </td>
        </tr>
        {% endfor %}
    </table></br>

    <h2>Top destinations:</h2>
    <h3>Last 3 months:</h3>
    <table>
        <th>Destination</th>
        <th>Tickets sold</th>

        {% for line in topdestsmonth %}
        <tr>
            <td>{{line['arrive_airport']}}</td>
            <td>{{line['ticketCount']}}</td>
        </tr>
        {% endfor %}
    </table>
    <h3>Last year:</h3>
    <table>
        <th>Destination</th>
        <th>Tickets sold</th>

        {% for line in topdestsyear %}
        <tr>
            <td>{{line['arrive_airport']}}</td>
            <td>{{line['ticketCount']}}</td>
        {% endfor %}
    </table>
            
    

    </br></br><a href="/logoutStaff">Logout</a>

</body>

</html>
